<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>GALLERY</title>
    <link rel="stylesheet" href="css/main.css">

	<!-- preview-related stylesheets -->
	<link rel="stylesheet" href="assets/preview-assets/main.css" />



	<!-- Gridzy files -->
	<link rel="stylesheet" href="assets/gridzy/gridzy-1.3.css" />
	<script src="assets/gridzy/gridzy-1.3.min.js"></script>
    
</head>
<style>
    #preloader {
        position: fixed;
        left: 0;
        top: 0;
        height: 100%;
        width: 100%;
        background-color: black;
        background-image: radial-gradient(700px, #6d75ff, #000);
        z-index: 1000;
    }
    #preloader img {
        position:  absolute;
        left: 0;
        right: 0;
        top: 0;
        bottom: 0;
        margin: auto;
    }
</style>
<body>
    <div id="preloader"> 
        <img src="/img/gif/loading.gif" alt=""> 
    </div>
    
    <div id="layout"></div>
    <header>
        <nav class="nav-main">  
            <img src="/img/gif/alarm.gif" alt="" class="header__alarm">
            <img src="/img/gif/header-coin.gif" alt="" class="heaer__coin">
            <img src="/img/cactus.png" alt="" class="header__cactus">
            <img src="/img/gif/header-cube.gif" alt="" class="header__cube">
            <a class='button' href="/sculptor.html">Sculptor</a>
            <a class='button' href="/machine.html">Gallery</a>
            <a class='button' href="/categories.html">Shop</a>
            <!--<a class='button' href="/product.html">Product</a>-->
            <a class='button' href="/news.html">News</a>
            <a class='button' href="/contacts.html">Contacts</a>
        </nav>
    </header>
    
    <div class="gallery__filter">
        <ul class="gallery__filter-list">
            <li>
                <select name="" id="filter-category">
                    <option value="all">All categories</option>
                </select>
            </li>

            <li>
                <select name="" id="filter-year">
                    <option value="all">Creation year</option>
                </select>
            </li>

            <li>
                <select name="" id="filter-size">
                    <option value="all">Size</option>
                </select>
            </li>

            <li class="gallery__search">
                <form action="">
                    <input type="text" placeholder="Search by name">
                    <input type="submit" value="">
                </form>
            </li>
            <span class="gallery__filter-nut"></span>
        </ul>
    </div>
    <div class="gallery__not-found">
        Not found
    </div>
    <div class="gridzy gridzyClassic gridzyAnimated">
        <!--<div>
            <img src="img/pics-001.jpg" alt="">
            <div>
                <h5>Lampe, 2008</h5>
                <h3>LA BOÎTE DE PANDOR </h3>
                <span>$998</span>
                <a href="/product.html"></a>
            </div>
            <div class="gridzy__video-container">
                <video muted class="category-item__video">
                    <source src="/img/video/header.webm" type="video/webm">
                    <source src="/img/video/header.mp4" type="video/mp4">
                    <source src="/img/video/header.ogv" type="video/ogg">
                </video>
            </div>

           
        </div>
        <div>
            <img src="img/pics-002.jpg" alt="">
             <div>
                <h5>Lampe, 2008</h5>
                <h3>LA BOÎTE DE PANDOR </h3>
                <span>$998</span>
                <a href="/product.html"></a>
            </div>
            <div class="gridzy__video-container">
                <video muted class="category-item__video">
                    <source src="/img/video/header.webm" type="video/webm">
                    <source src="/img/video/header.mp4" type="video/mp4">
                    <source src="/img/video/header.ogv" type="video/ogg">
                </video>
            </div>
        </div>
        <div>
            <img src="img/pics-002.jpg" alt="">
             <div>
                <h5>Lampe, 2008</h5>
                <h3>LA BOÎTE DE PANDOR </h3>
                <span>$998</span>
                <a href="/product.html"></a>
            </div>
            <div class="gridzy__video-container">
                <video muted class="category-item__video">
                    <source src="/img/video/header.webm" type="video/webm">
                    <source src="/img/video/header.mp4" type="video/mp4">
                    <source src="/img/video/header.ogv" type="video/ogg">
                </video>
            </div>
        </div>
        <div>
            <img src="img/pics-002.jpg" alt="">
             <div>
                <h5>Lampe, 2008</h5>
                <h3>LA BOÎTE DE PANDOR </h3>
                <span>$998</span>
                <a href="/product.html"></a>
            </div>
            <div class="gridzy__video-container">
                <video muted class="category-item__video">
                    <source src="/img/video/header.webm" type="video/webm">
                    <source src="/img/video/header.mp4" type="video/mp4">
                    <source src="/img/video/header.ogv" type="video/ogg">
                </video>
            </div>
        </div>
        <div>
            <img src="img/pics-004.jpg" alt="">
             <div>
                <h5>Lampe, 2008</h5>
                <h3>LA BOÎTE DE PANDOR </h3>
                <span>$998</span>
                <a href="/product.html"></a>
            </div>
            <div class="gridzy__video-container">
                <video muted class="category-item__video">
                    <source src="/img/video/header.webm" type="video/webm">
                    <source src="/img/video/header.mp4" type="video/mp4">
                    <source src="/img/video/header.ogv" type="video/ogg">
                </video>
            </div>
        </div>
        <div>
            <img src="img/pics-005.jpg" alt="">
             <div>
                <h5>Lampe, 2008</h5>
                <h3>LA BOÎTE DE PANDOR </h3>
                <span>$998</span>
                <a href="/product.html"></a>
            </div>
            <div class="gridzy__video-container">
                <video muted class="category-item__video">
                    <source src="/img/video/header.webm" type="video/webm">
                    <source src="/img/video/header.mp4" type="video/mp4">
                    <source src="/img/video/header.ogv" type="video/ogg">
                </video>
            </div>
        </div>
        <div>
            <img src="img/pics-006.jpg" alt="">
             <div>
                <h5>Lampe, 2008</h5>
                <h3>LA BOÎTE DE PANDOR </h3>
                <span>$998</span>
                <a href="/product.html"></a>
            </div>
            <div class="gridzy__video-container">
                <video muted class="category-item__video">
                    <source src="/img/video/header.webm" type="video/webm">
                    <source src="/img/video/header.mp4" type="video/mp4">
                    <source src="/img/video/header.ogv" type="video/ogg">
                </video>
            </div>
        </div>
        <div>
            <img src="img/pics-007.jpg" alt="">
             <div>
                <h5>Lampe, 2008</h5>
                <h3>LA BOÎTE DE PANDOR </h3>
                <span>$998</span>
                <a href="/product.html"></a>
            </div>
            <div class="gridzy__video-container">
                <video muted class="category-item__video">
                    <source src="/img/video/header.webm" type="video/webm">
                    <source src="/img/video/header.mp4" type="video/mp4">
                    <source src="/img/video/header.ogv" type="video/ogg">
                </video>
            </div>
        </div>
        <div>
            <img src="img/pics-008.jpg" alt="">
             <div>
                <h5>Lampe, 2008</h5>
                <h3>LA BOÎTE DE PANDOR </h3>
                <span>$998</span>
                <a href="/product.html"></a>
            </div>
            <div class="gridzy__video-container">
                <video muted class="category-item__video">
                    <source src="/img/video/header.webm" type="video/webm">
                    <source src="/img/video/header.mp4" type="video/mp4">
                    <source src="/img/video/header.ogv" type="video/ogg">
                </video>
            </div>
        </div>
        <div>
            <img src="img/pics-010.jpg" alt="">
             <div>
                <h5>Lampe, 2008</h5>
                <h3>LA BOÎTE DE PANDOR </h3>
                <span>$998</span>
                <a href="/product.html"></a>
            </div>
            <div class="gridzy__video-container">
                <video muted class="category-item__video">
                    <source src="/img/video/header.webm" type="video/webm">
                    <source src="/img/video/header.mp4" type="video/mp4">
                    <source src="/img/video/header.ogv" type="video/ogg">
                </video>
            </div>
        </div>
        <div>
            <img src="img/pics-011.jpg" alt="">
             <div>
                <h5>Lampe, 2008</h5>
                <h3>LA BOÎTE DE PANDOR </h3>
                <span>$998</span>
                <a href="/product.html"></a>
            </div>
            <div class="gridzy__video-container">
                <video muted class="category-item__video">
                    <source src="/img/video/header.webm" type="video/webm">
                    <source src="/img/video/header.mp4" type="video/mp4">
                    <source src="/img/video/header.ogv" type="video/ogg">
                </video>
            </div>
        </div>
        <div>
            <img src="img/pics-012.jpg" alt="">
             <div>
                <h5>Lampe, 2008</h5>
                <h3>LA BOÎTE DE PANDOR </h3>
                <span>$998</span>
                <a href="/product.html"></a>
            </div>
            <div class="gridzy__video-container">
                <video muted class="category-item__video">
                    <source src="/img/video/header.webm" type="video/webm">
                    <source src="/img/video/header.mp4" type="video/mp4">
                    <source src="/img/video/header.ogv" type="video/ogg">
                </video>
            </div>
        </div>-->
    </div>
<script>
    function buildSlider() {
        let container = document.querySelector('.gridzy');
        let elements  = Array.from(container.children);

        if (elements.length > 2 ) {
            new Gridzy(document.querySelector('.gridzy'));
        } else {
            elements.forEach(e => {
                e.className = 'gridzyItemContent gridzyItem gridzyItem--another'
            })
        }

        setTimeout(function() {

            let galleryList = Array.from(document.querySelectorAll('.gridzyItemContent'));
            galleryList.forEach(b => {

                let video = b.querySelector('video');
                b.onmouseover = function() {video.play();}
                b.onmouseout  = function() {video.pause();}

                let 
                    title         = b.querySelector('h3'),
                    blockW        = b.clientWidth,
                    blockH        = b.clientHeight,
                    textContainer = b.querySelector('div');


                if (blockH > blockW) {
                    textContainer.style.alignItems  = 'flex-start';
                    title.style.fontSize = (blockW * 0.12) + 'px';
                    title.style.lineHeight = (blockW * .14) + 'px';
                } else {
                    title.style.fontSize = (blockW * 0.08) + 'px';
                    title.style.lineHeight = (blockW * .11) + 'px';
                }

            });
        }, 500);
    }


    function buildGallery() {
        let 
            thisDoc   = document,
            container = thisDoc.querySelector('.gridzy'),
            prevElem  = container.nextElementSibling,
            clone     = container.cloneNode(false),
            notFound  = thisDoc.querySelector('.gallery__not-found'),
            products;


        if (localStorage.getItem('currentGalleryList')) {
            products  = localStorage.getItem('currentGalleryList').split(',');
        } else if (localStorage.getItem('allProducts')) {
            products = localStorage.getItem('allProducts').split(',');
        } else {
            products = [];
        }
        
        
        
        if (products.length > 0 && products[0] !== '') {
        
            notFound.setAttribute('style', '');

            document.querySelector('body').insertBefore(clone, prevElem);
            container.remove();
            container = thisDoc.querySelector('.gridzy');
            
            products.forEach(product => {
                let obj = JSON.parse(localStorage.getItem(product));
                let div = thisDoc.createElement('div');
                
                let markup = 
                    `
                    <img src="${obj.images[0]}" alt="${obj.title}">
                    <div>
                        <h5>${obj.category}, ${obj.year}</h5>
                        <h3>${obj.title}</h3>
                        <span>$${obj.price}</span>
                        <a href="${obj.link}"></a>
                    </div>
                    <div class="gridzy__video-container">
                        <video muted class="category-item__video">
                            <source src="${obj.video}.webm" type="video/webm">
                            <source src="${obj.video}.mp4" type="video/mp4">
                            <source src="${obj.video}.ogv" type="video/ogg">
                        </video>
                    </div>
                    `;
                    
                div.innerHTML = markup;
                container.appendChild(div);
            });
        } else {
            container.innerHTML = '';
            notFound.style.display = 'block';
        }
    }   

    function buildFilterForm() {
        let thisDoc = document;
        let container = thisDoc.querySelector('.gallery__filter-list');

        let 
            option      = thisDoc.createElement('option');
            years       = localStorage.getItem('years').split(','),
            categories  = localStorage.getItem('categories').split(','),
            sizes       = localStorage.getItem('sizes').split(','),

            filterCategory = container.querySelector('#filter-category'),
            filterYear = container.querySelector('#filter-year'),
            filterSize = container.querySelector('#filter-size');
        
            createOptions(filterCategory, categories, 'currentCategory');
            createOptions(filterYear, years, 'currentYear');
            createOptions(filterSize, sizes, 'currentSize');

            function createOptions(select, array, localCurrent) {
                array.forEach( j => {
                    console.log(j);
                    let item = thisDoc.createElement('option');
                    item.setAttribute('value', j);
                    item.innerHTML = j;
                    console.log(j,localCurrent);
                    localCurrent = localStorage.getItem(`${localCurrent}`);
                    if (j == localCurrent) item.setAttribute('selected', '')
                    select.appendChild(item);
                })
            } 

    }
    setTimeout(function() {
        buildFilterForm();
        buildGallery();
        buildSlider();
    }, 100)
    
   
    
</script>


    <!--<script src="https://www.youtube.com/iframe_api"></script>

    <div class="video-container">
        <div id="video-placeholder"></div>
        <div class="video-hover"></div>
    </div>

    <style>
        .video-container  {
            position: relative;
            height: 400px;
            width: 600px;
        }
        .video-hover {
            position: absolute;
            height: 100%;
            width: 100%;
            z-index: 2;
            cursor: pointer;
            top: 0;
            left: 0;
        }
    
    </style>

    <script>
    function onYouTubeIframeAPIReady() {
        player = new YT.Player('video-placeholder', {
        width: 600,
        height: 400,
        videoId: 'Xa0Q0J5tOP0',

        playerVars: {
            controls        : 0,
            autoplay        : 1,
            fs              : 0,
            loop            : 1,
            rel             : 0,
            disablekb       : 0,
            enablejsapi     : 0,
            iv_load_policy  : 3,
            modestbranding  : 1,
            showinfo        : 0
        },
        events: {
            onReady: initialize
        }
        });
    }

    let video  = document.querySelector('#video-placeholder');
    console.log(video);
    function initialize(){
        // Обновляем элементы управления и загружаем
        // Сброс старого интервала
        clearInterval(time_update_interval);
        // Запускаем обновление таймера и дорожки проигрывания
        // каждую секунду.
        time_update_interval = setInterval(function () {
        }, 1000)
    }
    </script>-->
     <!--<iframe width="560" height="315" src="https://www.youtube.com/embed/9JtIObId5Os?rel=0&amp;controls=0&amp;showinfo=0" frameborder="0" allowfullscreen autoplay=''></iframe>-->

    <script src='js/main.js'></script>
</body>

</html>